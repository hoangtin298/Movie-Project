{"ast":null,"code":"import * as actionTypes from \"./constant\";\nimport axios from \"axios\";\nimport { swalSuccess } from \"../../../../utils/index\";\nexport const actSignInApi = (userAccount, history) => {\n  return dispatch => {\n    dispatch(actSignInRequest());\n    axios({\n      url: `https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/DangNhap`,\n      method: \"POST\",\n      data: userAccount\n    }).then(result => {\n      localStorage.setItem(\"currentUser\", JSON.stringify(result.data)); // dispatch({\n      //   type: \"LOGGED_IN\",\n      //   payload: JSON.parse(localStorage.getItem(\"currentUser\")),\n      // });\n\n      axios({\n        url: `https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/TimKiemNguoiDung`,\n        method: \"GET\",\n        params: {\n          MaNhom: \"GP09\",\n          tuKhoa: JSON.parse(localStorage.getItem(\"currentUser\")).hoTen\n        }\n      }).then(result => {\n        dispatch({\n          type: \"LOGGED_IN\",\n          payload: result.data\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n      dispatch(actSignInSuccess(result.data));\n      swalSuccess(\"Đăng nhập thành công\").then(result => {\n        history.replace(\"/\");\n      });\n    }).catch(error => {\n      dispatch(actSignInFailed(error));\n    });\n  };\n};\n\nconst actSignInRequest = () => {\n  return {\n    type: actionTypes.SIGN_IN_REQUEST\n  };\n};\n\nconst actSignInSuccess = userAccount => {\n  return {\n    type: actionTypes.SIGN_IN_SUCCESS,\n    payload: userAccount\n  };\n};\n\nconst actSignInFailed = error => {\n  return {\n    type: actionTypes.SIGN_IN_FAILED,\n    payload: error\n  };\n};","map":{"version":3,"sources":["E:/Semester_6/Booking_App/booking/src/containers/HomeTemplate/SignIn/modules/action.js"],"names":["actionTypes","axios","swalSuccess","actSignInApi","userAccount","history","dispatch","actSignInRequest","url","method","data","then","result","localStorage","setItem","JSON","stringify","params","MaNhom","tuKhoa","parse","getItem","hoTen","type","payload","catch","error","console","log","actSignInSuccess","replace","actSignInFailed","SIGN_IN_REQUEST","SIGN_IN_SUCCESS","SIGN_IN_FAILED"],"mappings":"AAAA,OAAO,KAAKA,WAAZ,MAA6B,YAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,yBAA5B;AAEA,OAAO,MAAMC,YAAY,GAAG,CAACC,WAAD,EAAcC,OAAd,KAA0B;AACpD,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACC,gBAAgB,EAAjB,CAAR;AACAN,IAAAA,KAAK,CAAC;AACJO,MAAAA,GAAG,EAAG,iEADF;AAEJC,MAAAA,MAAM,EAAE,MAFJ;AAGJC,MAAAA,IAAI,EAAEN;AAHF,KAAD,CAAL,CAKGO,IALH,CAKSC,MAAD,IAAY;AAChBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCC,IAAI,CAACC,SAAL,CAAeJ,MAAM,CAACF,IAAtB,CAApC,EADgB,CAGhB;AACA;AACA;AACA;;AAEAT,MAAAA,KAAK,CAAC;AACJO,QAAAA,GAAG,EAAG,yEADF;AAEJC,QAAAA,MAAM,EAAE,KAFJ;AAGJQ,QAAAA,MAAM,EAAE;AACNC,UAAAA,MAAM,EAAE,MADF;AAENC,UAAAA,MAAM,EAAEJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,aAArB,CAAX,EAAgDC;AAFlD;AAHJ,OAAD,CAAL,CAQGX,IARH,CAQSC,MAAD,IAAY;AAChBN,QAAAA,QAAQ,CAAC;AACPiB,UAAAA,IAAI,EAAE,WADC;AAEPC,UAAAA,OAAO,EAAEZ,MAAM,CAACF;AAFT,SAAD,CAAR;AAID,OAbH,EAcGe,KAdH,CAcUC,KAAD,IAAW;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,OAhBH;AAkBApB,MAAAA,QAAQ,CAACuB,gBAAgB,CAACjB,MAAM,CAACF,IAAR,CAAjB,CAAR;AAEAR,MAAAA,WAAW,CAAC,sBAAD,CAAX,CAAoCS,IAApC,CAA0CC,MAAD,IAAY;AACnDP,QAAAA,OAAO,CAACyB,OAAR,CAAgB,GAAhB;AACD,OAFD;AAGD,KApCH,EAqCGL,KArCH,CAqCUC,KAAD,IAAW;AAChBpB,MAAAA,QAAQ,CAACyB,eAAe,CAACL,KAAD,CAAhB,CAAR;AACD,KAvCH;AAwCD,GA1CD;AA2CD,CA5CM;;AA8CP,MAAMnB,gBAAgB,GAAG,MAAM;AAC7B,SAAO;AACLgB,IAAAA,IAAI,EAAEvB,WAAW,CAACgC;AADb,GAAP;AAGD,CAJD;;AAMA,MAAMH,gBAAgB,GAAIzB,WAAD,IAAiB;AACxC,SAAO;AACLmB,IAAAA,IAAI,EAAEvB,WAAW,CAACiC,eADb;AAELT,IAAAA,OAAO,EAAEpB;AAFJ,GAAP;AAID,CALD;;AAOA,MAAM2B,eAAe,GAAIL,KAAD,IAAW;AACjC,SAAO;AACLH,IAAAA,IAAI,EAAEvB,WAAW,CAACkC,cADb;AAELV,IAAAA,OAAO,EAAEE;AAFJ,GAAP;AAID,CALD","sourcesContent":["import * as actionTypes from \"./constant\";\r\nimport axios from \"axios\";\r\nimport { swalSuccess } from \"../../../../utils/index\";\r\n\r\nexport const actSignInApi = (userAccount, history) => {\r\n  return (dispatch) => {\r\n    dispatch(actSignInRequest());\r\n    axios({\r\n      url: `https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/DangNhap`,\r\n      method: \"POST\",\r\n      data: userAccount,\r\n    })\r\n      .then((result) => {\r\n        localStorage.setItem(\"currentUser\", JSON.stringify(result.data));\r\n\r\n        // dispatch({\r\n        //   type: \"LOGGED_IN\",\r\n        //   payload: JSON.parse(localStorage.getItem(\"currentUser\")),\r\n        // });\r\n\r\n        axios({\r\n          url: `https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/TimKiemNguoiDung`,\r\n          method: \"GET\",\r\n          params: {\r\n            MaNhom: \"GP09\",\r\n            tuKhoa: JSON.parse(localStorage.getItem(\"currentUser\")).hoTen,\r\n          },\r\n        })\r\n          .then((result) => {\r\n            dispatch({\r\n              type: \"LOGGED_IN\",\r\n              payload: result.data,\r\n            });\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n\r\n        dispatch(actSignInSuccess(result.data));\r\n\r\n        swalSuccess(\"Đăng nhập thành công\").then((result) => {\r\n          history.replace(\"/\");\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        dispatch(actSignInFailed(error));\r\n      });\r\n  };\r\n};\r\n\r\nconst actSignInRequest = () => {\r\n  return {\r\n    type: actionTypes.SIGN_IN_REQUEST,\r\n  };\r\n};\r\n\r\nconst actSignInSuccess = (userAccount) => {\r\n  return {\r\n    type: actionTypes.SIGN_IN_SUCCESS,\r\n    payload: userAccount,\r\n  };\r\n};\r\n\r\nconst actSignInFailed = (error) => {\r\n  return {\r\n    type: actionTypes.SIGN_IN_FAILED,\r\n    payload: error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}